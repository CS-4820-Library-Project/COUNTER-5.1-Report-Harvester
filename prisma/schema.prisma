generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "sqlite"
  url      = "file:./search.db"
}

model Report {
  id               Int            @id @default(autoincrement())
  report_id        String
  report_name      String
  release          String
  institution_name String
  institution_id   String
  created          String
  created_by       String
  ReportFilter     ReportFilter[]
  // MISSING HEADERS (REPORTING PERIOD, METRIC_TYPES, REPORT_ATTRIBUTES, )
  ReportItem       ReportItem[]
}

model ReportFilter {
  id          Int    @id @default(autoincrement())
  reportId    Int
  report      Report @relation(fields: [reportId], references: [id])
  filter_type String
  value       String
}

model ReportItem {
  id             Int     @id @default(autoincrement())
  reportId       Int
  report         Report  @relation(fields: [reportId], references: [id])
  title          String?
  publisher      String?
  publisher_id   String?
  platform       String?
  doi            String?
  proprietary_id String?
  isbn           String?
  print_issn     String?
  online_issn    String?
  uri            String?
  data_type      String?
  metric_type    String?
  // INCLUDE ALL COLUMNS POSISIBLE FILL AS NULL IF NOT AVAILABLE IN REPORT
  // MISSING METRICS for each report type see counter types file to see all columns for each version

  ReportMetric ReportMetric[]
}

model ReportMetric {
  id           Int        @id @default(autoincrement())
  reportItemId Int
  period       String // YYYY-MM
  value        Int
  metricType   String
  //
  reportItem   ReportItem @relation(fields: [reportItemId], references: [id])
}
